<!--
  templateType: blog_post
  isAvailableForNewContent: true
  enableDomainStylesheets: true
  label: LizShaw.com Blog Post
-->
{% extends "./layouts/base.hubl.html" %}

{% block body %}

  {# Image placement var #}
  {%- choice "image_placement" label='Choose image placement', value='Right', choices='Left, Right, Center' export_to_template_context=True -%}

  {# Header with title, image and other meta data #}
  {%- js_partial
    path="@projects/LizShawCom-project/LizShawCom-app/components/partials/PostHeader.tsx",
    imagePlacement="{{ widget_data.image_placement.value|lower }}",
    title="{{ content.name|striptags }}",
    image="{{ content.featured_image or '' }}",
    imageAlt="{{ content.featured_image_alt }}",
    authorDisplayName="{{ content.blog_author.display_name }}",
    authorSlug="{{ content.blog_author.slug }}",
    publishDate="{{ content.publish_date_localized }}",
    topic_list="{{ content.topic_list|tojson }}",
    publishedUrl="{{ content.published_url }}",
    no_wrapper=True
  -%}

  {# Article #}
  {%- if bundle_request.inpageEditorUI -%}
    {# Using content.post_body in the page editor allows users to edit #}
    {# TODO: Add this to a blog post of little-known HubL tips and tricks, plus some Jinja stuff #}
    {{ content.post_body }}
  {%- else -%}
    {%- js_partial
      path="@projects/LizShawCom-project/LizShawCom-app/components/partials/Article.tsx",
      html="{{ content.post_body_rss|cut('<br>')|cut('<br />')|cut('<br/>') }}",
      no_wrapper=True
    -%}
  {%- endif -%}

      <h3 class="post__centered-heading">Further Reading</h3>
      <aside class="cards" data-variant="related" role="supplemental">
        {% from 'Templates/Custom/Blog/Mordite Blog/Macros/card.html' import renderCard %}
        {% related_blog_posts blog_ids="3920686537", limit=3, post_formatter="renderCard", no_wrapper=True %}
      </aside>

      <section class="post__comments" {% unless useComments %} style="display:none;"{% endunless %}>
        <h3 class="post__centered-heading">Discussion</h3>
        {%- blog_comments "blog_comments" overrideable=False, label='Comments' -%}
      </section>

      {%- if content.topic_list -%}
        <p class="post__topics"> Topics:
          {% for topic in content.topic_list %}
            <a class="post__topics-link" href="{{ blog_tag_url(group.id, topic.slug) }}">{{ topic.name }}</a>{% if not loop.last %},{% endif %}
          {% endfor %}
        </p>
      {%- endif -%}
{% endblock body %}
